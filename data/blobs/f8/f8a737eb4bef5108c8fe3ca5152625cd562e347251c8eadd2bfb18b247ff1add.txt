package com.app.shoecop.pages;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;


import com.app.shoecop.R;
import com.app.shoecop.online.OnlineRequests;

import androidx.appcompat.app.AppCompatActivity;

public class EmailActivity extends AppCompatActivity {
    private EditText etEmail;
    private Button btnSendCode;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_verify_mail);

        etEmail = findViewById(R.id.etInEmail);
        btnSendCode = findViewById(R.id.btnSendCode);

        btnSendCode.setOnClickListener(v -> {

            String email = etEmail.getText().toString().trim();

            if (email.isEmpty()) {
                Toast.makeText(EmailActivity.this, "Los campos no pueden estar vacíos", Toast.LENGTH_SHORT).show();
                return;
            } else if (!email.contains("@")) {
                Toast.makeText(EmailActivity.this, "El correo electrónico debe contener '@'", Toast.LENGTH_SHORT).show();
                return;
            } else if (!email.endsWith(".com") &&
                    !email.endsWith(".org") &&
                    !email.endsWith(".edu") &&
                    !email.endsWith(".net") &&
                    !email.endsWith(".es") &&
                    !email.endsWith(".gov")) {

                Toast.makeText(EmailActivity.this,
                        "El correo electrónico debe tener una terminación válida",
                        Toast.LENGTH_SHORT).show();
                return;
            } else {
                String contexto = "VerifyEmail";

                OnlineRequests validator = new OnlineRequests(this);
                validator.validarEmail(email, contexto);
            }
        });
    }



    public void goBack(View view) {
        finish(); // Close HomeActivity
    }
}

package org.Marco.vista;
import org.Marco.figura.Cuadrado;
import org.Marco.figura.Equilatero;
import org.Marco.model.figura.figura2.Escaleno;
import org.Marco.model.figura.figura2.Isosceles;
import org.Marco.util.ReadUtil;
import org.gerdoc.historial.Historiales;
import org.gerdoc.model.figura.Figura;

public class ConsolaMarco implements org.gerdoc.vista.Ejecutable {
    private static ConsolaMarco consolaM;
    private Historiales historiales;
    private ConsolaMarco() {}

    public static ConsolaMarco getInstance( ) {
        if(consolaM==null)
        {
            return new ConsolaMarco();
        }
        return consolaM;
    }

    @Override
    public void run( ) {
        boolean flag = true;
        int opcion = 0;
        Figura figura = null;
        while( flag ) {
            Menu.principal( );
            Menu.seleccionaOpcion( );
            opcion = ReadUtil.readInt( );
            figura = null;
            switch ( opcion ) {
                case 1:
                    figura = new Cuadrado( );
                    break;
                case 2:
                    figura = new Equilatero( );
                    break;
                case 3:
                    figura = new Isosceles();
                    break;
                case 4:
                    figura = new Escaleno( );
                    break;
                case 5:
                    flag = false;
                    break;
                default:
                    Menu.opcionInvalida( );
            }
            if( figura != null ) {
                ((org.gerdoc.vista.SolicitaDatos)figura).leeDatos( );
                Menu.calcula( figura );
                if( historiales != null )
                {
                    historiales.addFigura( figura );
                }
            }
        }

    }

    @Override
    public void addHistoriales(Historiales historiales) {
        this.historiales = historiales;
    }
}
